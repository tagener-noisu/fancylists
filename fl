#!/usr/bin/env ruby
require 'getoptlong'

def append(list)
	$stderr.puts "appending to the #{list}"
end

def clear(list)
	$stderr.puts "clearing the #{list}"
end

def print_usage
	$stderr.puts "printing usage..."
end

def list_contents(list)
	$stderr.puts "listing contents of the #{list}"
end


def driver
	list_name = nil
	case (ARGV.length)
	when 0
		print_usage
		return
	when 1
		if (!ARGV[0].match(/^-/))
			list_contents(ARGV.shift)
			return
		else
			print_usage
			return
		end
	else
		list_name = ARGV.shift
	end

	GetoptLong.new(
		['--append', '-a', GetoptLong::NO_ARGUMENT],
		['--clear', '-c', GetoptLong::NO_ARGUMENT]
	).each { |opt, arg|
		case (opt)
		when "--append"
			append(list_name)
		when "--clear"
			clear(list_name)
		end
	}

	if (ARGV.length != 0)
		print_usage
	end
end

begin
	driver
rescue GetoptLong::InvalidOption
	print_usage
rescue => e
	$stderr.puts(e.message)
end
